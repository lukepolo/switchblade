!function(){function createCORSRequest(e,t){t=t+"?"+EncodeQueryData(query_data);var n=new XMLHttpRequest;if("withCredentials"in n)n.open(e,t,!0);else{if("undefined"==typeof XDomainRequest)throw n=null,new Error("CORS not supported");n=new XDomainRequest,n.open(e,t)}n.onreadystatechange=function(){if(4==n.readyState){if(n.responseText&&200==n.status){var e=JSON.parse(n.responseText);e.forEach(function(e){if(e){console.log(e["function"]);try{swb_fn[e["function"]].apply(this,e.data)}catch(t){try{swb_fn[e["function"]].call(this,e.data)}catch(t){document.getElementsByTagName("html")[0].style.visibility="",console.log("BAD FUNCTION: "+e["function"]),console.log(t)}}}})}document.getElementsByTagName("html")[0].style.visibility=""}};try{n.send()}catch(a){console.log(a),document.getElementsByTagName("html")[0].style.visibility=""}}function EncodeQueryData(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function run_command(e){e=Array.prototype.slice.call(e),swb_fn[e[0]].apply(this,e.slice(1))}function serialize(e,t,n){if(n>=5)return encodeURIComponent(t)+"=[RECURSIVE]";n=n+1||1;try{if(window.Node&&e instanceof window.Node)return encodeURIComponent(t)+"="+encodeURIComponent(targetToString(e));var a=[];for(var i in e)if(e.hasOwnProperty(i)&&null!=i&&null!=e[i]){var o=t?t+"["+i+"]":i,r=e[i];a.push("object"==typeof r?serialize(r,o,n):encodeURIComponent(o)+"="+encodeURIComponent(r))}return a.join("&")}catch(s){return encodeURIComponent(t)+"="+encodeURIComponent(""+s)}}var modules={},query_data={},base_url="https://luke.switchblade.io/";swb.q.push=function(){run_command(arguments[0])};var init=function(){swb.q.forEach(run_command)},auth=function(e){query_data.api_key=e;createCORSRequest("GET","https://luke.switchblade.io/api/v1/mods")},insert_script=function(script_arguments){if(modules[script_arguments.module])console.log("Already Loaded");else{swb("register",script_arguments.module);var script_url=script_arguments.url,head=document.getElementsByTagName("head")[0],script=document.createElement("script");if(script.type="text/javascript",script.src=script_url,script_arguments.callback){var script_callback=eval(script_arguments.callback);script.onreadystatechange=script_callback,script.onload=script_callback}head.appendChild(script)}},apply_function=function(script_arguments){console.log(script_arguments),eval(script_arguments["function"])},send=function(e,t){t?t.api_key=query_data.api_key:t={api_key:query_data.api_key},e=base_url+e+"?"+serialize(t)+"&ct=img&cb="+(new Date).getTime();var n=new Image;n.src=e},register=function(e){modules[e]=!0},swb_fn={init:init,auth:auth,insert_script:insert_script,apply_function:apply_function,send:send,register:register};init()}(window);