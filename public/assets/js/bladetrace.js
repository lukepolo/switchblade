swb("register","tracer"),function(e,t){function n(e,t){try{if("function"!=typeof e)return e;if(!e.bugsnag){var n=a();e.bugsnag=function(r){if(t&&t.eventHandler&&(h=r),b=n,!E){var a=e.apply(this,arguments);return b=null,a}try{return e.apply(this,arguments)}catch(o){throw l("autoNotify",!0)&&(_.notifyException(o,null,null,"error"),v()),o}finally{b=null}},e.bugsnag.bugsnag=e.bugsnag}return e.bugsnag}catch(r){return e}}function r(){T=!1}function a(){var e=document.currentScript||b;if(!e&&T){var t=document.scripts||document.getElementsByTagName("script");e=t[t.length-1]}return e}function o(e){var t=a();t&&(e.script={src:t.src,content:l("inlineScript",!0)?t.innerHTML:""})}function i(t){var n=l("disableLog"),r=e.console;void 0===r||void 0===r.log||n||r.log("[Bugsnag] "+t)}function c(e,t){if(null==t)return e;e=e||{};for(var n in t)if(t.hasOwnProperty(n))try{e[n]=t[n].constructor===Object?c(e[n],t[n]):t[n]}catch(r){e[n]=t[n]}return e}function s(e,t){return t.type="js",void swb("send","api/v1/tracer",t)}function u(e){var t={},n=/^data\-([\w\-]+)$/;if(e)for(var r=e.attributes,a=0;a<r.length;a++){var o=r[a];if(n.test(o.nodeName)){var i=o.nodeName.match(n)[1];t[i]=o.value||o.nodeValue}}return t}function l(e,t){S=S||u(B);var n=void 0!==_[e]?_[e]:S[e.toLowerCase()];return"false"===n&&(n=!1),void 0!==n?n:t}function f(t,n){var r=l("apiKey");if(k){k-=1;var a=l("releaseStage"),o=l("notifyReleaseStages");if(o){for(var u=!1,f=0;f<o.length;f++)if(a===o[f]){u=!0;break}if(!u)return}var p=[t.name,t.message,t.stacktrace].join("|");if(p!==w){w=p,h&&(n=n||{},n["Last Event"]=m(h));var d={notifierVersion:L,apiKey:r,projectRoot:l("projectRoot")||e.location.protocol+"//"+e.location.host,context:l("context")||e.location.pathname,userId:l("userId"),user:l("user"),metaData:c(c({},l("metaData")),n),releaseStage:a,appVersion:l("appVersion"),url:e.location.href,userAgent:navigator.userAgent,language:navigator.language||navigator.userLanguage,severity:t.severity,name:t.name,message:t.message,stacktrace:t.stacktrace,file:t.file,lineNumber:t.lineNumber,columnNumber:t.columnNumber,payloadVersion:"2"},g=_.beforeNotify;if("function"==typeof g){var v=g(d,d.metaData);if(v===!1)return}return 0===d.lineNumber&&/Script error\.?/.test(d.message)?i("Ignoring cross-domain script error. See https://bugsnag.com/docs/notifiers/js/cors"):void s(l("endpoint")||I,d)}}}function p(){var e,t,n=10,r="[anonymous]";try{throw new Error("")}catch(a){e="<generated>\n",t=d(a)}if(!t){e="<generated-ie>\n";var o=[];try{for(var c=arguments.callee.caller.caller;c&&o.length<n;){var s=R.test(c.toString())?RegExp.$1||r:r;o.push(s),c=c.caller}}catch(u){i(u)}t=o.join("\n")}return e+t}function d(e){return e.stack||e.backtrace||e.stacktrace}function m(e){var t={millisecondsAgo:new Date-e.timeStamp,type:e.type,which:e.which,target:g(e.target)};return t}function g(e){if(e){var t=e.attributes;if(t){for(var n="<"+e.nodeName.toLowerCase(),r=0;r<t.length;r++)t[r].value&&"null"!=t[r].value.toString()&&(n+=" "+t[r].name+'="'+t[r].value+'"');return n+">"}return e.nodeName}}function v(){N+=1,e.setTimeout(function(){N-=1})}function y(t,n,r){var a=t[n],o=r(a);t[n]=o,"undefined"!=typeof BUGSNAG_TESTING&&e.undo&&e.undo.push(function(){t[n]=a})}var h,b,w,_={},E=!0,N=0,k=10;_.noConflict=function(){return e.Bugsnag=t,_},_.refresh=function(){k=10},_.notifyException=function(e,t,n,r){t&&"string"!=typeof t&&(n=t,t=void 0),n||(n={}),o(n),f({name:t||e.name,message:e.message||e.description,stacktrace:d(e)||p(),file:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber?e.columnNumber+1:void 0,severity:r||"warning"},n)},_.notify=function(t,n,r,a){f({name:t,message:n,stacktrace:p(),file:e.location.toString(),lineNumber:1,severity:a||"warning"},r)};var T="complete"!==document.readyState;document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!0),e.addEventListener("load",r,!0)):e.attachEvent("onload",r);var S,R=/function\s*([\w\-$]+)?\s*\(/i,C="https://luke.switchblade.io/",I=C+"api/v1/tracer/js",L="2.4.7",q=document.getElementsByTagName("script"),B=q[q.length-1];if(e.atob){if(e.ErrorEvent)try{0===new e.ErrorEvent("test").colno&&(E=!1)}catch(U){}}else E=!1;if(l("autoNotify",!0)){y(e,"onerror",function(t){return"undefined"!=typeof BUGSNAG_TESTING&&(_._onerror=t),function(n,r,a,i,c){var s=l("autoNotify",!0),u={};!i&&e.event&&(i=e.event.errorCharacter),o(u),b=null,s&&!N&&f({name:c&&c.name||"window.onerror",message:n,file:r,lineNumber:a,columnNumber:i,stacktrace:c&&d(c)||p(),severity:"error"},u),"undefined"!=typeof BUGSNAG_TESTING&&(t=_._onerror),t&&t(n,r,a,i,c)}});var A=function(e){return function(t,r){if("function"==typeof t){t=n(t);var a=Array.prototype.slice.call(arguments,2);return e(function(){t.apply(this,a)},r)}return e(t,r)}};y(e,"setTimeout",A),y(e,"setInterval",A),e.requestAnimationFrame&&y(e,"requestAnimationFrame",function(e){return function(t){return e(n(t))}}),e.setImmediate&&y(e,"setImmediate",function(e){return function(){var t=Array.prototype.slice.call(arguments);return t[0]=n(t[0]),e.apply(this,t)}}),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(t){var r=e[t]&&e[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(y(r,"addEventListener",function(e){return function(t,r,a,o){return r&&r.handleEvent&&(r.handleEvent=n(r.handleEvent,{eventHandler:!0})),e.call(this,t,n(r,{eventHandler:!0}),a,o)}}),y(r,"removeEventListener",function(e){return function(t,r,a,o){return e.call(this,t,r,a,o),e.call(this,t,n(r),a,o)}}))})}e.Bugsnag=_,"function"==typeof define&&define.amd?define([],function(){return _}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=_)}(window,window.Bugsnag),function(){function createCORSRequest(e,t){t=t+"?"+EncodeQueryData(query_data);var n=new XMLHttpRequest;if("withCredentials"in n)n.open(e,t,!0);else{if("undefined"==typeof XDomainRequest)throw n=null,new Error("CORS not supported");n=new XDomainRequest,n.open(e,t)}n.onreadystatechange=function(){if(4==n.readyState){if(n.responseText&&200==n.status){var e=JSON.parse(n.responseText);e.forEach(function(e){if(e){console.log(e["function"]);try{swb_fn[e["function"]].apply(this,e.data)}catch(t){try{swb_fn[e["function"]].call(this,e.data)}catch(t){document.getElementsByTagName("html")[0].style.visibility="",console.log("BAD FUNCTION: "+e["function"]),console.log(t)}}}})}document.getElementsByTagName("html")[0].style.visibility=""}};try{n.send()}catch(r){console.log(r),document.getElementsByTagName("html")[0].style.visibility=""}}function EncodeQueryData(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function run_command(e){e=Array.prototype.slice.call(e),swb_fn[e[0]].apply(this,e.slice(1))}function serialize(e,t,n){if(n>=5)return encodeURIComponent(t)+"=[RECURSIVE]";n=n+1||1;try{if(window.Node&&e instanceof window.Node)return encodeURIComponent(t)+"="+encodeURIComponent(targetToString(e));var r=[];for(var a in e)if(e.hasOwnProperty(a)&&null!=a&&null!=e[a]){var o=t?t+"["+a+"]":a,i=e[a];r.push("object"==typeof i?serialize(i,o,n):encodeURIComponent(o)+"="+encodeURIComponent(i))}return r.join("&")}catch(c){return encodeURIComponent(t)+"="+encodeURIComponent(""+c)}}var modules={},query_data={},base_url="https://luke.switchblade.io/";swb.q.push=function(){run_command(arguments[0])};var init=function(){swb.q.forEach(run_command)},auth=function(e){query_data.api_key=e;createCORSRequest("GET","https://luke.switchblade.io/api/v1/mods")},insert_script=function(script_arguments){if(modules[script_arguments.module])console.log("Already Loaded");else{swb("register",script_arguments.module);var script_url=script_arguments.url,head=document.getElementsByTagName("head")[0],script=document.createElement("script");if(script.type="text/javascript",script.src=script_url,script_arguments.callback){var script_callback=eval(script_arguments.callback);script.onreadystatechange=script_callback,script.onload=script_callback}head.appendChild(script)}},apply_function=function(script_arguments){console.log(script_arguments),eval(script_arguments["function"])},send=function(e,t){t?t.api_key=query_data.api_key:t={api_key:query_data.api_key},e=base_url+e+"?"+serialize(t)+"&ct=img&cb="+(new Date).getTime();var n=new Image;n.src=e},register=function(e){modules[e]=!0},swb_fn={init:init,auth:auth,insert_script:insert_script,apply_function:apply_function,send:send,register:register};init()}(window);
//# sourceMappingURL=bladetrace.js.map